{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst {\n  actions,\n  reducer\n} = createSlice({\n  name: \"cart\",\n  initialState: {\n    value: JSON.parse(localStorage.getItem(\"cart\")) || []\n  },\n  reducers: {\n    incCart(state, {\n      payload\n    }) {\n      let index = state.value.findIndex(el => el._id === payload._id);\n      if (index < 0) {\n        state.value = [...state.value, {\n          ...payload,\n          quantity: 1\n        }];\n      } else {\n        state.value = state.value.map((item, inx) => {\n          if (inx === index) {\n            return {\n              ...item,\n              quantity: item.quantity + 1\n            };\n          } else {\n            return item;\n          }\n        });\n      }\n      localStorage.setItem(\"cart\", JSON.stringify(state.value));\n    },\n    decCart(state, {\n      payload\n    }) {\n      let index = state.value.findIndex(el => el._id === payload._id);\n      state.value = state.value.map((item, inx) => index === inx ? {\n        ...item,\n        quantity: item.quantity - 1\n      } : item);\n    },\n    remove(state, {\n      payload\n    }) {\n      state.value = state.value.filter(item => item._id !== payload._id);\n    },\n    removeAllCart(state) {\n      state.value = [];\n    }\n  }\n});\nexport const {\n  incCart\n} = actions;\nexport default reducer;","map":{"version":3,"names":["createSlice","actions","reducer","name","initialState","value","JSON","parse","localStorage","getItem","reducers","incCart","state","payload","index","findIndex","el","_id","quantity","map","item","inx","setItem","stringify","decCart","remove","filter","removeAllCart"],"sources":["F:/react.js/lesson001/src/context/cartSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst { actions, reducer } = createSlice({\r\n  name: \"cart\",\r\n  initialState: {\r\n    value: JSON.parse(localStorage.getItem(\"cart\")) || [],\r\n  },\r\n\r\n  reducers: {\r\n    incCart(state, { payload }) {\r\n      let index = state.value.findIndex((el) => el._id === payload._id);\r\n      if (index < 0) {\r\n        state.value = [...state.value, { ...payload, quantity: 1 }];\r\n      } else {\r\n        state.value = state.value.map((item, inx) => {\r\n          if (inx === index) {\r\n            return { ...item, quantity: item.quantity + 1 };\r\n          } else {\r\n            return item;\r\n          }\r\n        });\r\n      }\r\n      localStorage.setItem(\"cart\", JSON.stringify(state.value));\r\n    },\r\n    decCart(state, { payload }) {\r\n      let index = state.value.findIndex((el) => el._id === payload._id);\r\n      state.value = state.value.map((item, inx) =>\r\n        index === inx ? { ...item, quantity: item.quantity - 1 } : item\r\n      );\r\n    },\r\n    remove(state, { payload }) {\r\n      state.value = state.value.filter((item) => item._id !== payload._id);\r\n    },\r\n    removeAllCart(state) {\r\n      state.value = [];\r\n    },\r\n  },\r\n});\r\n\r\nexport const { incCart } = actions;\r\nexport default reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAE9C,MAAM;EAAEC,OAAO;EAAEC;AAAQ,CAAC,GAAGF,WAAW,CAAC;EACvCG,IAAI,EAAE,MAAM;EACZC,YAAY,EAAE;IACZC,KAAK,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI;EACrD,CAAC;EAEDC,QAAQ,EAAE;IACRC,OAAOA,CAACC,KAAK,EAAE;MAAEC;IAAQ,CAAC,EAAE;MAC1B,IAAIC,KAAK,GAAGF,KAAK,CAACP,KAAK,CAACU,SAAS,CAAEC,EAAE,IAAKA,EAAE,CAACC,GAAG,KAAKJ,OAAO,CAACI,GAAG,CAAC;MACjE,IAAIH,KAAK,GAAG,CAAC,EAAE;QACbF,KAAK,CAACP,KAAK,GAAG,CAAC,GAAGO,KAAK,CAACP,KAAK,EAAE;UAAE,GAAGQ,OAAO;UAAEK,QAAQ,EAAE;QAAE,CAAC,CAAC;MAC7D,CAAC,MAAM;QACLN,KAAK,CAACP,KAAK,GAAGO,KAAK,CAACP,KAAK,CAACc,GAAG,CAAC,CAACC,IAAI,EAAEC,GAAG,KAAK;UAC3C,IAAIA,GAAG,KAAKP,KAAK,EAAE;YACjB,OAAO;cAAE,GAAGM,IAAI;cAAEF,QAAQ,EAAEE,IAAI,CAACF,QAAQ,GAAG;YAAE,CAAC;UACjD,CAAC,MAAM;YACL,OAAOE,IAAI;UACb;QACF,CAAC,CAAC;MACJ;MACAZ,YAAY,CAACc,OAAO,CAAC,MAAM,EAAEhB,IAAI,CAACiB,SAAS,CAACX,KAAK,CAACP,KAAK,CAAC,CAAC;IAC3D,CAAC;IACDmB,OAAOA,CAACZ,KAAK,EAAE;MAAEC;IAAQ,CAAC,EAAE;MAC1B,IAAIC,KAAK,GAAGF,KAAK,CAACP,KAAK,CAACU,SAAS,CAAEC,EAAE,IAAKA,EAAE,CAACC,GAAG,KAAKJ,OAAO,CAACI,GAAG,CAAC;MACjEL,KAAK,CAACP,KAAK,GAAGO,KAAK,CAACP,KAAK,CAACc,GAAG,CAAC,CAACC,IAAI,EAAEC,GAAG,KACtCP,KAAK,KAAKO,GAAG,GAAG;QAAE,GAAGD,IAAI;QAAEF,QAAQ,EAAEE,IAAI,CAACF,QAAQ,GAAG;MAAE,CAAC,GAAGE,IAC7D,CAAC;IACH,CAAC;IACDK,MAAMA,CAACb,KAAK,EAAE;MAAEC;IAAQ,CAAC,EAAE;MACzBD,KAAK,CAACP,KAAK,GAAGO,KAAK,CAACP,KAAK,CAACqB,MAAM,CAAEN,IAAI,IAAKA,IAAI,CAACH,GAAG,KAAKJ,OAAO,CAACI,GAAG,CAAC;IACtE,CAAC;IACDU,aAAaA,CAACf,KAAK,EAAE;MACnBA,KAAK,CAACP,KAAK,GAAG,EAAE;IAClB;EACF;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEM;AAAQ,CAAC,GAAGV,OAAO;AAClC,eAAeC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}